Конфигурация сервера состоит из:
1) Список виртуальных хостов ($CONF_DIR/vhosts.conf).
Имеет вид:
<ipv4_addr>
<hostname_1>:<port_1>
...
<hostname_n>:<port_n>
который означает, что адрес сервера - заданный в первой строке, и виртуальные хосты слушают на соотв. портах.
Один хост может слушать на нескольких портах, на одном порте могут слушать несколько хостов.
Реальный сервер будет слушать на всех различных портах и "перенаправлять" запросы к хостам.
2) Описание файлов, к которым применим get-запрос.
Это место сейчас зафиксировано, ввиду того что нужно обрабатывать GET-запросы только к статическим страницам.
GET применим к регулярным файлам в {data_dir}/{hostname}/static/ и её поддиректориях.
3) Отображение из расширения статического файла в MIME тип.
Это место сейчас зафиксировано, ввиду того что нужно обрабатывать GET-запросы только к статическим (html) страницам.
Поэтому MIME тип любого статического файла считается text/html.
4) Кодировка статических файлов.
Это место сейчас зафиксировано, кодировка всех таких файлов подразумевается UTF-8.
